<!DOCTYPE html>
<html>
<head>
  <title>Aerofly Moving Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <!-- Top Row Controls -->
  <div class="top-row-controls">
    <!-- Map Type Selector -->
    <div class="control-box map-selector-box">
      <div class="radio-group">
        <label class="radio-option">
          <input type="radio" name="map-tile" value="OpenStreetMap" checked onchange="changeMapTile()">
          <span class="radio-label">Map</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="map-tile" value="OpenTopoMap" onchange="changeMapTile()">
          <span class="radio-label">Topo</span>
        </label>
        <label class="radio-option">
          <input type="radio" name="map-tile" value="Esri.WorldImagery" onchange="changeMapTile()">
          <span class="radio-label">Sat</span>
        </label>
      </div>
    </div>
    
    <!-- Airports Toggle -->
    <div class="control-box">
      <div class="airport-toggle">
        <input type="checkbox" id="airport-toggle" checked onchange="toggleAirports()">
        <label for="airport-toggle">Airports</label>
      </div>
    </div>
    
    <!-- Follow Aircraft Toggle -->
    <div class="control-box">
      <div class="aircraft-follow-toggle">
        <input type="checkbox" id="aircraft-follow-toggle" checked onchange="toggleAircraftFollow()">
        <label for="aircraft-follow-toggle">Follow Aircraft</label>
      </div>
    </div>
  </div>

  <!-- Search Box (Upper Right) -->
  <div class="search-box-container">
    <div class="control-box search-box">
      <div class="search-input-container">
        <input type="text" id="airport-search" placeholder="Enter ICAO or COM freq" maxlength="7" onfocus="showVRKeyboard()">
        <div class="search-buttons">
          <button class="go-to-button" onclick="searchAirport()">Go To</button>
          <button class="clear-search-button" onclick="clearSearch()">Clear</button>
        </div>
      </div>
    </div>
  </div>

  <!-- VR Keyboard -->
  <div class="vr-keyboard" id="vr-keyboard" style="display: none;">
    <div class="keyboard-container">
      <div class="keyboard-header">
        <h3>VR Keyboard</h3>
        <button class="close-keyboard" onclick="hideVRKeyboard()">×</button>
      </div>
      <div class="keyboard-grid" id="keyboard-grid">
        <!-- Keys will be generated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Second Row Controls -->
  <div class="second-row-controls">
    <!-- Route Planner Box -->
    <div class="control-box route-planner-box">
      <div class="route-top-row">
        <div class="route-display">
          <span>FROM:</span>
          <div class="route-field" id="route-from-display">Click airport</div>
          <span>→</span>
          <span>TO:</span>
          <div class="route-field" id="route-to-display">Click airport</div>
        </div>
        <div class="route-buttons">
          <button onclick="drawRoute()" id="route-button" disabled>Route</button>
          <button class="clear" onclick="clearRoute()">Clear</button>
        </div>
      </div>
      <!-- Route Info Display -->
      <div class="route-info" id="route-info" style="display: none;">
        <div class="route-info-row">
          <span>Bearing:</span>
          <span id="route-bearing">0.0°</span>
        </div>
        <div class="route-info-row">
          <span>Distance:</span>
          <span id="route-distance">0.0 nm</span>
        </div>
      </div>
    </div>
    
    <!-- COM Radios Box -->
    <div class="control-box com-radios-box">
      <div class="com1-control">
        <div class="com-header">
          <input type="checkbox" id="com1-toggle" onchange="toggleCom('com1')">
          <label for="com1-toggle">com 1</label>
        </div>
        <div class="frequency-display-row">
          <div class="frequency-display-active" id="com1-active">118.000</div>
          <button class="swap-button" onclick="swapFrequencies('com1')">SWAP</button>
          <div class="frequency-display-standby" id="com1-standby">118.500</div>
        </div>
      </div>
      
      <div class="com2-control">
        <div class="com-header">
          <input type="checkbox" id="com2-toggle" onchange="toggleCom('com2')">
          <label for="com2-toggle">com 2</label>
        </div>
        <div class="frequency-display-row">
          <div class="frequency-display-active" id="com2-active">118.000</div>
          <button class="swap-button" onclick="swapFrequencies('com2')">SWAP</button>
          <div class="frequency-display-standby" id="com2-standby">118.500</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Airport Frequency Panel -->
  <div class="airport-frequency-panel" id="airport-frequency-panel" style="display: none;">
    <div class="panel-header">
      <h3 id="airport-panel-title">Airport Frequencies</h3>
      <button class="close-panel" onclick="closeAirportPanel()">×</button>
    </div>
    <div class="frequency-list" id="frequency-list">
      <!-- Frequencies will be populated here -->
    </div>
  </div>

  <!-- Map Container -->
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-providers@latest/leaflet-providers.js"></script>
  <script src="https://rawcdn.githack.com/bbecquet/Leaflet.RotatedMarker/master/leaflet.rotatedMarker.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
